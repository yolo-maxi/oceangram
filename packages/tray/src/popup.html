<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="popup.css">
  <title>Oceangram</title>
</head>
<body>
  <div class="app">
    <div class="connection-banner" id="connectionBanner">
      Disconnected from daemon
    </div>

    <!-- Header bar -->
    <div class="header">
      <div class="header-title" id="headerTitle">Oceangram</div>
      <div class="header-actions">
        <button class="header-btn" id="settingsBtn" title="Settings">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96a7.04 7.04 0 00-1.62-.94l-.36-2.54a.48.48 0 00-.48-.41h-3.84a.48.48 0 00-.48.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87a.48.48 0 00.12.61l2.03 1.58c-.04.31-.06.63-.06.94 0 .31.02.63.06.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.36 1.03.7 1.62.94l.36 2.54c.05.24.26.41.48.41h3.84c.24 0 .44-.17.48-.41l.36-2.54c.59-.24 1.13-.58 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6A3.6 3.6 0 1112 8.4a3.6 3.6 0 010 7.2z" fill="currentColor"/>
          </svg>
        </button>
        <button class="header-btn" id="closeBtn" title="Close">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="main-content">
      <!-- Left sidebar: chat list -->
      <div class="sidebar" id="sidebar">
        <div class="search-bar">
          <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M15.5 14h-.79l-.28-.27A6.47 6.47 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="currentColor"/>
          </svg>
          <input type="text" class="search-input" id="searchInput" placeholder="Search chats...">
        </div>
        <div class="chat-list" id="chatList">
          <div class="chat-list-loading">Loading chats...</div>
        </div>
      </div>

      <!-- Right panel: messages -->
      <div class="chat-panel" id="chatPanel">
        <!-- Empty state (no chat selected) -->
        <div class="chat-empty" id="chatEmpty">
          <div class="chat-empty-icon">ðŸ’¬</div>
          <div class="chat-empty-text">Select a chat to start messaging</div>
        </div>

        <!-- Chat view (hidden until a chat is selected) -->
        <div class="chat-view" id="chatView" style="display: none;">
          <div class="chat-header" id="chatHeader">
            <button class="back-btn" id="backBtn" title="Back to chats">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" fill="currentColor"/>
              </svg>
            </button>
            <div class="chat-header-avatar" id="chatHeaderAvatar">
              <span id="chatHeaderLetter">?</span>
              <img id="chatHeaderAvatarImg" style="display:none;">
            </div>
            <div class="chat-header-info">
              <div class="chat-header-name" id="chatHeaderName">...</div>
              <div class="chat-header-status" id="chatHeaderStatus"></div>
            </div>
          </div>

          <div class="messages" id="messages">
            <div class="loading" id="loadingState">Loading messages...</div>
          </div>

          <div class="composer">
            <textarea
              class="composer-input"
              id="composerInput"
              placeholder="Message..."
              rows="1"
            ></textarea>
            <button class="composer-send" id="sendBtn" title="Send">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" fill="currentColor"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="../dist/popup.js"></script>
</body>
</html>
