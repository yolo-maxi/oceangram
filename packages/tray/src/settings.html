<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="settings.css">
  <title>Oceangram — Settings</title>
  <style>
    /* Theme variables for settings page — synced with popup.css */
    [data-theme="day"] {
      --bg-primary: #ffffff; --bg-secondary: #f4f4f5; --bg-card: #ffffff;
      --accent: #3390ec; --accent-hover: #4ea4f6;
      --text-primary: #000000; --text-secondary: #707579;
      --border: #e7e7e7; --red: #e53935; --green: #4fae4e;
    }
    [data-theme="night"] {
      --bg-primary: #212121; --bg-secondary: #181818; --bg-card: #2b2b2b;
      --accent: #8774e1; --accent-hover: #9a8aee;
      --text-primary: #ffffff; --text-secondary: #aaaaaa;
      --border: #303030; --red: #e53935; --green: #4fae4e;
    }
    [data-theme="tinted"] {
      --bg-primary: #17212b; --bg-secondary: #0e1621; --bg-card: #182533;
      --accent: #5eb5f7; --accent-hover: #79c4fc;
      --text-primary: #f5f5f5; --text-secondary: #708499;
      --border: #1f2f3f; --red: #e53935; --green: #4fae4e;
    }
    [data-theme="arctic"] {
      --bg-primary: #1a1a2e; --bg-secondary: #13131f; --bg-card: #252540;
      --accent: #b066ff; --accent-hover: #c088ff;
      --text-primary: #e0e0f0; --text-secondary: #8888aa;
      --border: #2a2a45; --red: #ff5252; --green: #4caf50;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <h1>⚙️ Settings</h1>
      <button class="header-close" id="closeBtn" title="Close">✕</button>
    </div>

    <div class="content">
      <!-- Daemon Status -->
      <div class="section">
        <div class="section-title">Connection</div>
        <div class="status-card">
          <div class="status-dot" id="statusDot"></div>
          <div>
            <div class="status-text" id="statusText">Checking...</div>
            <div class="status-detail" id="statusDetail">localhost:7777</div>
          </div>
        </div>
      </div>

      <!-- Pinned Chats -->
      <div class="section">
        <div class="section-title">Pinned Chats</div>
        <div class="whitelist-list" id="whitelistList">
          <div class="whitelist-empty">No pinned chats</div>
        </div>
        <div class="add-user">
          <select id="dialogSelect">
            <option value="">— Select a chat to pin —</option>
          </select>
          <button class="add-btn" id="addBtn" disabled>Pin</button>
        </div>
      </div>

      <!-- Muted Chats -->
      <div class="section">
        <div class="section-title">Muted Chats</div>
        <div class="section-desc">Muted chats are hidden from the tray. Unmute here to show them again.</div>
        <div class="blacklist-list" id="blacklistList">
          <div class="blacklist-empty">No muted chats</div>
        </div>
      </div>

      <!-- OpenClaw Integration -->
      <div class="section">
        <div class="section-title">OpenClaw</div>
        <div class="section-desc">Connect to an OpenClaw gateway for AI agent status in chat headers.</div>

        <div class="setting-row">
          <div>
            <div class="setting-label">Enable OpenClaw</div>
            <div class="setting-desc">Show agent session info in chats</div>
          </div>
          <label class="toggle">
            <input type="checkbox" id="openclawEnabled">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-row" id="openclawTokenRow" style="display:none">
          <div style="flex:1">
            <div class="setting-label">Gateway Token</div>
            <input type="password" class="setting-input" id="openclawToken" placeholder="Paste gateway auth token">
          </div>
        </div>

        <div class="setting-row" id="openclawUrlRow" style="display:none">
          <div style="flex:1">
            <div class="setting-label">Gateway URL</div>
            <input type="text" class="setting-input" id="openclawUrl" placeholder="ws://localhost:18789">
          </div>
        </div>

        <div class="status-card" id="openclawStatus" style="display:none">
          <div class="status-dot" id="openclawDot"></div>
          <div>
            <div class="status-text" id="openclawStatusText">Checking...</div>
          </div>
        </div>
      </div>

      <!-- General Settings -->
      <div class="section">
        <div class="section-title">General</div>

        <div class="setting-row">
          <div>
            <div class="setting-label">Always on Top</div>
            <div class="setting-desc">Keep popup above other windows</div>
          </div>
          <label class="toggle">
            <input type="checkbox" id="alwaysOnTop" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-row">
          <div>
            <div class="setting-label">Theme</div>
            <div class="setting-desc">Choose the appearance of the chat popup</div>
          </div>
          <select class="setting-select" id="themeSelect">
            <option value="day">Day</option>
            <option value="night">Night</option>
            <option value="tinted">Tinted</option>
            <option value="arctic">Arctic</option>
            <option value="system">System (auto)</option>
          </select>
        </div>
      </div>
    </div>

      <!-- OpenClaw Integration -->
      <div class="section">
        <div class="section-title">OpenClaw</div>
        <div class="section-desc">Connect to an OpenClaw gateway to see AI agent status per chat.</div>

        <div class="setting-row">
          <div>
            <div class="setting-label">Enable</div>
            <div class="setting-desc">Show agent status bar in chats</div>
          </div>
          <label class="toggle">
            <input type="checkbox" id="openclawEnabled">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-row" id="openclawTokenRow" style="display:none">
          <div style="flex:1">
            <div class="setting-label">Gateway Token</div>
            <input type="password" class="setting-input" id="openclawToken" placeholder="paste token here" autocomplete="off">
          </div>
        </div>

        <div class="setting-row" id="openclawUrlRow" style="display:none">
          <div style="flex:1">
            <div class="setting-label">Gateway URL</div>
            <input type="text" class="setting-input" id="openclawUrl" placeholder="ws://localhost:18789" autocomplete="off">
          </div>
        </div>

        <div class="openclaw-status" id="openclawStatus" style="display:none"></div>
      </div>

    <div class="footer">
      Oceangram Tray v0.1.0 — connects to oceangram-daemon
    </div>
  </div>

  <script src="../dist/settings.js"></script>
</body>
</html>
